<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Green Hats Chatbot</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-white shadow p-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold text-green-700 text-center w-full">ðŸ¤– Green Hats Chatbot</h1>
    <a href="/nueva_conversacion" 
       class="absolute right-4 text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition">
      ðŸ†• Nuevo chat
    </a>
  </header>

  <!-- Chat container -->
  <main class="flex-1 overflow-y-auto p-6 max-w-2xl w-full mx-auto space-y-4" id="chat-box">
    {% for message in messages[-30:] %}
      {% if message.rol == 'user' %}
        <div class="flex justify-end">
          <div class="bg-green-600 text-white p-3 rounded-xl max-w-xs">
            {{ message.contenido }}
          </div>
        </div>
      {% elif message.rol == 'bot' %}
        <div class="flex justify-start">
          <div class="bg-white border border-gray-300 p-3 rounded-xl max-w-xs shadow">
            <strong class="text-green-700">Bot:</strong> {{ message.contenido }}
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </main>

  <!-- Input form -->
  <form method="post" class="bg-white shadow-inner p-4 flex gap-4 items-center sticky bottom-0 w-full max-w-2xl mx-auto">
    <input type="text" name="question" placeholder="Escribe tu pregunta aquÃ­..." 
           class="flex-1 p-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-400" required />
    <button type="submit" 
            class="bg-green-600 text-white px-4 py-2 rounded-full hover:bg-green-700 transition">
      Enviar
    </button>
  </form>
</body>
</html>

